{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/app.js","src/js/modules/processData.js","src/js/modules/tables.js","src/js/modules/time.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import processData from './modules/processData';\nimport time from './modules/time';\nimport buildTable from './modules/tables';\n\n/**\n * Namespace object\n */\nvar jira = {\n    webSocket: new WebSocket(\"ws://10.89.236.210:7700/socketserver\"),\n    data: {\n        projects: {}, //data for currently tracked projects\n        devs: {} //data for tickets by developers\n    },\n    widgets: {\n        time: {\n            container: \"widget_time\",\n            class: \"b_time\"\n        },\n        tables: {\n            container: \"widget_projects\",\n            class: \"b_table\"\n        }\n    }\n}\n\n/**\n * Establish connection\n */\njira.webSocket.onopen = function(event) {\n    console.log(`Browser >> Connected to http://10.89.236.210/`);\n    jira.webSocket.send('Test');\n};\n\n/**\n * Update info\n */\njira.webSocket.onmessage = function(event) {\n    processData(jira, JSON.parse(event.data));\n    time(jira);\n    tablesWidgetUpdate();\n}\n\n/**\n * Tables update\n */\nfunction tablesWidgetUpdate() {\n    document.getElementById(jira.widgets.tables.container).textContent = '';\n    buildTable(jira, 'projects');\n    buildTable(jira, 'devs');\n}","export default function(jira, data) {\n    \n    //check if data contains message\n    if (data.message) {\n        console.log(data.message);\n        return;\n    }\n\n    //update jira.data object\n    for (let item in data) {\n        jira.data[item] = data[item];\n    }\n    console.log(new Date());\n    console.log(jira.data);\n}","/**\n * Module to build tables based on data type\n * \n * @export tablesFactory function\n * @param {object} [jira={}] data to be used in table \n * @param {string} [type=\"projects\"]  table type => \"projects\" || \"devs\"\n * @returns {void}\n */\nexport default function(jira = {}, type = \"projects\") {\n\n    //check if data object is not empty\n    if (noData(jira.data[type])) return;\n\n    //create table, headers, rows, select container\n    let container = document.getElementById(jira.widgets.tables.container),\n        table = createNode('table'),\n        headers = createHeaders(jira.data[type], type),\n        rows = createRows(jira.data[type], type, headers);\n\n    createTable(container, type, table, headers, rows);\n}\n\n/**\n * Create headers for table based on type\n * \n * @param {object} data object containing data on current projects\n * @param {string} type table type => \"projects\" || \"devs\"\n * @returns {object} array with headers' names\n */\nfunction createHeaders(data, type) {\n    let headers = [];\n    if (type === \"projects\") {\n        headers = [\n            'Project',\n            'Jira Key',\n            '(Re)Open',\n            'In Progress',\n            'Dev Complete',\n            'Tridion Pbl',\n            'QA Test',\n            'Blocked',\n            'Closed',\n            'Assignees'\n        ];\n    } else {\n        headers = ['Developer'];\n        for (let dev in data) {\n            for (let project in data[dev]) {\n                if (!headers.includes(project)) headers.push(project);\n            }\n        }\n    }\n    return headers;\n}\n\n/**\n * Check if data is a proper object\n * \n * @param {object} data object to check \n * @returns {boolean} \n */\nfunction noData(data) {\n    if (Object.keys(data).length === 0 && data.constructor === Object) {\n        return true;\n    }\n    return false;\n}\n\n/**\n * Elements factory\n * \n * @param {string} nodeType indicate element type\n * @param {string} content set textContent for element\n * @returns {object} html node\n */\nfunction createNode(nodeType, content) {\n    let node = document.createElement(nodeType);\n    (nodeType === \"table\") ? node.className = \"b_table\": node.className = `b_table__${nodeType}`;\n    if (content || content === 0) node.textContent = content;\n    return node;\n}\n\n/**\n * Creaet rows from data\n * \n * @param {object} data object containing data on current projects\n * @param {string} type table type => \"projects\" || \"devs\"\n * @returns {array} with html nodes\n */\nfunction createRows(data, type, headers) {\n    let rows = [];\n    for (let row in data) {\n        let tr = createNode('tr');\n        rows.push(createCell(tr, data[row], row, type, headers));\n    }\n    return rows;\n}\n\nfunction addClassModifier(node, classModifier = '--active') {\n    classModifier = node.className + classModifier;\n    node.classList.add(classModifier);\n}\n\n/**\n * Create cell beased on bunch of params...\n * \n * @param {object} tr current tr html node\n * @param {object} data object containing data on current projects\n * @param {string} name name of the current row \n * @param {string} type table type => \"projects\" || \"devs\"\n * @param {array} headers array with data for table headers\n * @returns {object} tr html node\n */\nfunction createCell(tr, data, name, type, headers) {\n    let cells = [];\n\n    if (type === \"projects\") {\n        //destructuring object with project data & assigning default values\n        let {\n            assignees = [null],\n                blocked = 0,\n                closed = 0,\n                devComplete = 0,\n                devTest = 0,\n                inProgress = 0,\n                name = \"Top Secret\",\n                opened = 0,\n                project = \"Classified\",\n                readyForTest = 0,\n                tridion = 0\n        } = data;\n\n        //building an array for cells in a proper order\n        cells = [name, project, opened, inProgress, devComplete, tridion, readyForTest, blocked, closed, assignees];\n\n    } else {\n        for (let project of headers) cells.push(0);\n        cells[0] = name; //set dev name as the first value in cells array\n        for (let project in data) {\n            //assign dev's project value (num of tickets) to proper position in cells arr\n            cells[headers.indexOf(project)] = data[project];\n        }\n    }\n\n    for (let i = 0; i < cells.length; i++) {\n        let td = createNode('td', cells[i]),\n            blocked = 7;\n\n        //check for blocked column\n        if (i === blocked && cells[i] > 0) addClassModifier(td, '--red');\n\n        tr.appendChild(td);\n    }\n    return tr;\n}\n\n/**\n * Build a table\n * \n * @param {object} container table's container\n * @param {object} table html node object\n * @param {array} headers array with headers' values\n * @param {array} rows array with html nodes to be used as rows\n * @returns {void} \n */\nfunction createTable(container, type, table, headers, rows) {\n\n    let tableTitle = createNode('h2', type);\n\n    //create headers\n    let tr = createNode('tr');\n    for (let cell of headers) {\n        let td = createNode('th', cell);\n        tr.appendChild(td);\n    }\n    table.appendChild(tr);\n\n    // table.appendChild(headers);\n    for (let row of rows) {\n        table.appendChild(row);\n    }\n\n    //append table to its container\n    container.appendChild(tableTitle);\n    container.appendChild(table);\n}","export default function(jira = {}) {\n    let container = document.getElementById(jira.widgets.time.container),\n        header = document.createElement('h2'),\n        time = new Date(),\n        hours = time.getHours() > 12 ? (time.getHours() - 1) : time.getHours(),\n        minutes = time.getMinutes() < 10 ? `0${time.getMinutes()}` : time.getMinutes();\n\n    container.textContent = '';\n    header.className = jira.widgets.time.class;\n    header.textContent = `Last update: ${hours} : ${minutes}`;\n    container.appendChild(header);\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL21vZHVsZXMvcHJvY2Vzc0RhdGEuanMiLCJzcmMvanMvbW9kdWxlcy90YWJsZXMuanMiLCJzcmMvanMvbW9kdWxlcy90aW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBOzs7QUFHQSxJQUFJLE9BQU87QUFDUCxlQUFXLElBQUksU0FBSixDQUFjLHNDQUFkLENBREo7QUFFUCxVQUFNO0FBQ0Ysa0JBQVUsRUFEUixFQUNZO0FBQ2QsY0FBTSxFQUZKLENBRU87QUFGUCxLQUZDO0FBTVAsYUFBUztBQUNMLGNBQU07QUFDRix1QkFBVyxhQURUO0FBRUYsbUJBQU87QUFGTCxTQUREO0FBS0wsZ0JBQVE7QUFDSix1QkFBVyxpQkFEUDtBQUVKLG1CQUFPO0FBRkg7QUFMSDs7QUFZYjs7O0FBbEJXLENBQVgsQ0FxQkEsS0FBSyxTQUFMLENBQWUsTUFBZixHQUF3QixVQUFTLEtBQVQsRUFBZ0I7QUFDcEMsWUFBUSxHQUFSO0FBQ0EsU0FBSyxTQUFMLENBQWUsSUFBZixDQUFvQixNQUFwQjtBQUNILENBSEQ7O0FBS0E7OztBQUdBLEtBQUssU0FBTCxDQUFlLFNBQWYsR0FBMkIsVUFBUyxLQUFULEVBQWdCO0FBQ3ZDLCtCQUFZLElBQVosRUFBa0IsS0FBSyxLQUFMLENBQVcsTUFBTSxJQUFqQixDQUFsQjtBQUNBLHdCQUFLLElBQUw7QUFDQTtBQUNILENBSkQ7O0FBTUE7OztBQUdBLFNBQVMsa0JBQVQsR0FBOEI7QUFDMUIsYUFBUyxjQUFULENBQXdCLEtBQUssT0FBTCxDQUFhLE1BQWIsQ0FBb0IsU0FBNUMsRUFBdUQsV0FBdkQsR0FBcUUsRUFBckU7QUFDQSwwQkFBVyxJQUFYLEVBQWlCLFVBQWpCO0FBQ0EsMEJBQVcsSUFBWCxFQUFpQixNQUFqQjtBQUNIOzs7Ozs7Ozs7a0JDakRj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b0IsRUFBcEIsU0FBNkIsS0FBSyxVQUFMLEVBQTdCLEdBQW1ELEtBQUssVUFBTCxFQUpqRTs7QUFNQSxjQUFVLFdBQVYsR0FBd0IsRUFBeEI7QUFDQSxXQUFPLFNBQVAsR0FBbUIsS0FBSyxPQUFMLENBQWEsSUFBYixDQUFrQixLQUFyQztBQUNBLFdBQU8sV0FBUCxxQkFBcUMsS0FBckMsV0FBZ0QsT0FBaEQ7QUFDQSxjQUFVLFdBQVYsQ0FBc0IsTUFBdEI7QUFDSCxDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBwcm9jZXNzRGF0YSBmcm9tICcuL21vZHVsZXMvcHJvY2Vzc0RhdGEnO1xuaW1wb3J0IHRpbWUgZnJvbSAnLi9tb2R1bGVzL3RpbWUnO1xuaW1wb3J0IGJ1aWxkVGFibGUgZnJvbSAnLi9tb2R1bGVzL3RhYmxlcyc7XG5cbi8qKlxuICogTmFtZXNwYWNlIG9iamVjdFxuICovXG52YXIgamlyYSA9IHtcbiAgICB3ZWJTb2NrZXQ6IG5ldyBXZWJTb2NrZXQoXCJ3czovLzEwLjg5LjIzNi4yMTA6NzcwMC9zb2NrZXRzZXJ2ZXJcIiksXG4gICAgZGF0YToge1xuICAgICAgICBwcm9qZWN0czoge30sIC8vZGF0YSBmb3IgY3VycmVudGx5IHRyYWNrZWQgcHJvamVjdHNcbiAgICAgICAgZGV2czoge30gLy9kYXRhIGZvciB0aWNrZXRzIGJ5IGRldmVsb3BlcnNcbiAgICB9LFxuICAgIHdpZGdldHM6IHtcbiAgICAgICAgdGltZToge1xuICAgICAgICAgICAgY29udGFpbmVyOiBcIndpZGdldF90aW1lXCIsXG4gICAgICAgICAgICBjbGFzczogXCJiX3RpbWVcIlxuICAgICAgICB9LFxuICAgICAgICB0YWJsZXM6IHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogXCJ3aWRnZXRfcHJvamVjdHNcIixcbiAgICAgICAgICAgIGNsYXNzOiBcImJfdGFibGVcIlxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEVzdGFibGlzaCBjb25uZWN0aW9uXG4gKi9cbmppcmEud2ViU29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgY29uc29sZS5sb2coYEJyb3dzZXIgPj4gQ29ubmVjdGVkIHRvIGh0dHA6Ly8xMC44OS4yMzYuMjEwL2ApO1xuICAgIGppcmEud2ViU29ja2V0LnNlbmQoJ1Rlc3QnKTtcbn07XG5cbi8qKlxuICogVXBkYXRlIGluZm9cbiAqL1xuamlyYS53ZWJTb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBwcm9jZXNzRGF0YShqaXJhLCBKU09OLnBhcnNlKGV2ZW50LmRhdGEpKTtcbiAgICB0aW1lKGppcmEpO1xuICAgIHRhYmxlc1dpZGdldFVwZGF0ZSgpO1xufVxuXG4vKipcbiAqIFRhYmxlcyB1cGRhdGVcbiAqL1xuZnVuY3Rpb24gdGFibGVzV2lkZ2V0VXBkYXRlKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGppcmEud2lkZ2V0cy50YWJsZXMuY29udGFpbmVyKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIGJ1aWxkVGFibGUoamlyYSwgJ3Byb2plY3RzJyk7XG4gICAgYnVpbGRUYWJsZShqaXJhLCAnZGV2cycpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGppcmEsIGRhdGEpIHtcbiAgICBcbiAgICAvL2NoZWNrIGlmIGRhdGEgY29udGFpbnMgbWVzc2FnZVxuICAgIGlmIChkYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vdXBkYXRlIGppcmEuZGF0YSBvYmplY3RcbiAgICBmb3IgKGxldCBpdGVtIGluIGRhdGEpIHtcbiAgICAgICAgamlyYS5kYXRhW2l0ZW1dID0gZGF0YVtpdGVtXTtcbiAgICB9XG4gICAgY29uc29sZS5sb2cobmV3IERhdGUoKSk7XG4gICAgY29uc29sZS5sb2coamlyYS5kYXRhKTtcbn0iLCIvKipcbiAqIE1vZHVsZSB0byBidWlsZCB0YWJsZXMgYmFzZWQgb24gZGF0YSB0eXBlXG4gKiBcbiAqIEBleHBvcnQgdGFibGVzRmFjdG9yeSBmdW5jdGlvblxuICogQHBhcmFtIHtvYmplY3R9IFtqaXJhPXt9XSBkYXRhIHRvIGJlIHVzZWQgaW4gdGFibGUgXG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGU9XCJwcm9qZWN0c1wiXSAgdGFibGUgdHlwZSA9PiBcInByb2plY3RzXCIgfHwgXCJkZXZzXCJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihqaXJhID0ge30sIHR5cGUgPSBcInByb2plY3RzXCIpIHtcblxuICAgIC8vY2hlY2sgaWYgZGF0YSBvYmplY3QgaXMgbm90IGVtcHR5XG4gICAgaWYgKG5vRGF0YShqaXJhLmRhdGFbdHlwZV0pKSByZXR1cm47XG5cbiAgICAvL2NyZWF0ZSB0YWJsZSwgaGVhZGVycywgcm93cywgc2VsZWN0IGNvbnRhaW5lclxuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChqaXJhLndpZGdldHMudGFibGVzLmNvbnRhaW5lciksXG4gICAgICAgIHRhYmxlID0gY3JlYXRlTm9kZSgndGFibGUnKSxcbiAgICAgICAgaGVhZGVycyA9IGNyZWF0ZUhlYWRlcnMoamlyYS5kYXRhW3R5cGVdLCB0eXBlKSxcbiAgICAgICAgcm93cyA9IGNyZWF0ZVJvd3MoamlyYS5kYXRhW3R5cGVdLCB0eXBlLCBoZWFkZXJzKTtcblxuICAgIGNyZWF0ZVRhYmxlKGNvbnRhaW5lciwgdHlwZSwgdGFibGUsIGhlYWRlcnMsIHJvd3MpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBoZWFkZXJzIGZvciB0YWJsZSBiYXNlZCBvbiB0eXBlXG4gKiBcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIG9iamVjdCBjb250YWluaW5nIGRhdGEgb24gY3VycmVudCBwcm9qZWN0c1xuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgdGFibGUgdHlwZSA9PiBcInByb2plY3RzXCIgfHwgXCJkZXZzXCJcbiAqIEByZXR1cm5zIHtvYmplY3R9IGFycmF5IHdpdGggaGVhZGVycycgbmFtZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSGVhZGVycyhkYXRhLCB0eXBlKSB7XG4gICAgbGV0IGhlYWRlcnMgPSBbXTtcbiAgICBpZiAodHlwZSA9PT0gXCJwcm9qZWN0c1wiKSB7XG4gICAgICAgIGhlYWRlcnMgPSBbXG4gICAgICAgICAgICAnUHJvamVjdCcsXG4gICAgICAgICAgICAnSmlyYSBLZXknLFxuICAgICAgICAgICAgJyhSZSlPcGVuJyxcbiAgICAgICAgICAgICdJbiBQcm9ncmVzcycsXG4gICAgICAgICAgICAnRGV2IENvbXBsZXRlJyxcbiAgICAgICAgICAgICdUcmlkaW9uIFBibCcsXG4gICAgICAgICAgICAnUUEgVGVzdCcsXG4gICAgICAgICAgICAnQmxvY2tlZCcsXG4gICAgICAgICAgICAnQ2xvc2VkJyxcbiAgICAgICAgICAgICdBc3NpZ25lZXMnXG4gICAgICAgIF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZGVycyA9IFsnRGV2ZWxvcGVyJ107XG4gICAgICAgIGZvciAobGV0IGRldiBpbiBkYXRhKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwcm9qZWN0IGluIGRhdGFbZGV2XSkge1xuICAgICAgICAgICAgICAgIGlmICghaGVhZGVycy5pbmNsdWRlcyhwcm9qZWN0KSkgaGVhZGVycy5wdXNoKHByb2plY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXJzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGRhdGEgaXMgYSBwcm9wZXIgb2JqZWN0XG4gKiBcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIG9iamVjdCB0byBjaGVjayBcbiAqIEByZXR1cm5zIHtib29sZWFufSBcbiAqL1xuZnVuY3Rpb24gbm9EYXRhKGRhdGEpIHtcbiAgICBpZiAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwICYmIGRhdGEuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEVsZW1lbnRzIGZhY3RvcnlcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IG5vZGVUeXBlIGluZGljYXRlIGVsZW1lbnQgdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgc2V0IHRleHRDb250ZW50IGZvciBlbGVtZW50XG4gKiBAcmV0dXJucyB7b2JqZWN0fSBodG1sIG5vZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlVHlwZSwgY29udGVudCkge1xuICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlVHlwZSk7XG4gICAgKG5vZGVUeXBlID09PSBcInRhYmxlXCIpID8gbm9kZS5jbGFzc05hbWUgPSBcImJfdGFibGVcIjogbm9kZS5jbGFzc05hbWUgPSBgYl90YWJsZV9fJHtub2RlVHlwZX1gO1xuICAgIGlmIChjb250ZW50IHx8IGNvbnRlbnQgPT09IDApIG5vZGUudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIENyZWFldCByb3dzIGZyb20gZGF0YVxuICogXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSBvYmplY3QgY29udGFpbmluZyBkYXRhIG9uIGN1cnJlbnQgcHJvamVjdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIHRhYmxlIHR5cGUgPT4gXCJwcm9qZWN0c1wiIHx8IFwiZGV2c1wiXG4gKiBAcmV0dXJucyB7YXJyYXl9IHdpdGggaHRtbCBub2Rlc1xuICovXG5mdW5jdGlvbiBjcmVhdGVSb3dzKGRhdGEsIHR5cGUsIGhlYWRlcnMpIHtcbiAgICBsZXQgcm93cyA9IFtdO1xuICAgIGZvciAobGV0IHJvdyBpbiBkYXRhKSB7XG4gICAgICAgIGxldCB0ciA9IGNyZWF0ZU5vZGUoJ3RyJyk7XG4gICAgICAgIHJvd3MucHVzaChjcmVhdGVDZWxsKHRyLCBkYXRhW3Jvd10sIHJvdywgdHlwZSwgaGVhZGVycykpO1xuICAgIH1cbiAgICByZXR1cm4gcm93cztcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3NNb2RpZmllcihub2RlLCBjbGFzc01vZGlmaWVyID0gJy0tYWN0aXZlJykge1xuICAgIGNsYXNzTW9kaWZpZXIgPSBub2RlLmNsYXNzTmFtZSArIGNsYXNzTW9kaWZpZXI7XG4gICAgbm9kZS5jbGFzc0xpc3QuYWRkKGNsYXNzTW9kaWZpZXIpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBjZWxsIGJlYXNlZCBvbiBidW5jaCBvZiBwYXJhbXMuLi5cbiAqIFxuICogQHBhcmFtIHtvYmplY3R9IHRyIGN1cnJlbnQgdHIgaHRtbCBub2RlXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSBvYmplY3QgY29udGFpbmluZyBkYXRhIG9uIGN1cnJlbnQgcHJvamVjdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGN1cnJlbnQgcm93IFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgdGFibGUgdHlwZSA9PiBcInByb2plY3RzXCIgfHwgXCJkZXZzXCJcbiAqIEBwYXJhbSB7YXJyYXl9IGhlYWRlcnMgYXJyYXkgd2l0aCBkYXRhIGZvciB0YWJsZSBoZWFkZXJzXG4gKiBAcmV0dXJucyB7b2JqZWN0fSB0ciBodG1sIG5vZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2VsbCh0ciwgZGF0YSwgbmFtZSwgdHlwZSwgaGVhZGVycykge1xuICAgIGxldCBjZWxscyA9IFtdO1xuXG4gICAgaWYgKHR5cGUgPT09IFwicHJvamVjdHNcIikge1xuICAgICAgICAvL2Rlc3RydWN0dXJpbmcgb2JqZWN0IHdpdGggcHJvamVjdCBkYXRhICYgYXNzaWduaW5nIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBhc3NpZ25lZXMgPSBbbnVsbF0sXG4gICAgICAgICAgICAgICAgYmxvY2tlZCA9IDAsXG4gICAgICAgICAgICAgICAgY2xvc2VkID0gMCxcbiAgICAgICAgICAgICAgICBkZXZDb21wbGV0ZSA9IDAsXG4gICAgICAgICAgICAgICAgZGV2VGVzdCA9IDAsXG4gICAgICAgICAgICAgICAgaW5Qcm9ncmVzcyA9IDAsXG4gICAgICAgICAgICAgICAgbmFtZSA9IFwiVG9wIFNlY3JldFwiLFxuICAgICAgICAgICAgICAgIG9wZW5lZCA9IDAsXG4gICAgICAgICAgICAgICAgcHJvamVjdCA9IFwiQ2xhc3NpZmllZFwiLFxuICAgICAgICAgICAgICAgIHJlYWR5Rm9yVGVzdCA9IDAsXG4gICAgICAgICAgICAgICAgdHJpZGlvbiA9IDBcbiAgICAgICAgfSA9IGRhdGE7XG5cbiAgICAgICAgLy9idWlsZGluZyBhbiBhcnJheSBmb3IgY2VsbHMgaW4gYSBwcm9wZXIgb3JkZXJcbiAgICAgICAgY2VsbHMgPSBbbmFtZSwgcHJvamVjdCwgb3BlbmVkLCBpblByb2dyZXNzLCBkZXZDb21wbGV0ZSwgdHJpZGlvbiwgcmVhZHlGb3JUZXN0LCBibG9ja2VkLCBjbG9zZWQsIGFzc2lnbmVlc107XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBwcm9qZWN0IG9mIGhlYWRlcnMpIGNlbGxzLnB1c2goMCk7XG4gICAgICAgIGNlbGxzWzBdID0gbmFtZTsgLy9zZXQgZGV2IG5hbWUgYXMgdGhlIGZpcnN0IHZhbHVlIGluIGNlbGxzIGFycmF5XG4gICAgICAgIGZvciAobGV0IHByb2plY3QgaW4gZGF0YSkge1xuICAgICAgICAgICAgLy9hc3NpZ24gZGV2J3MgcHJvamVjdCB2YWx1ZSAobnVtIG9mIHRpY2tldHMpIHRvIHByb3BlciBwb3NpdGlvbiBpbiBjZWxscyBhcnJcbiAgICAgICAgICAgIGNlbGxzW2hlYWRlcnMuaW5kZXhPZihwcm9qZWN0KV0gPSBkYXRhW3Byb2plY3RdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdGQgPSBjcmVhdGVOb2RlKCd0ZCcsIGNlbGxzW2ldKSxcbiAgICAgICAgICAgIGJsb2NrZWQgPSA3O1xuXG4gICAgICAgIC8vY2hlY2sgZm9yIGJsb2NrZWQgY29sdW1uXG4gICAgICAgIGlmIChpID09PSBibG9ja2VkICYmIGNlbGxzW2ldID4gMCkgYWRkQ2xhc3NNb2RpZmllcih0ZCwgJy0tcmVkJyk7XG5cbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xuICAgIH1cbiAgICByZXR1cm4gdHI7XG59XG5cbi8qKlxuICogQnVpbGQgYSB0YWJsZVxuICogXG4gKiBAcGFyYW0ge29iamVjdH0gY29udGFpbmVyIHRhYmxlJ3MgY29udGFpbmVyXG4gKiBAcGFyYW0ge29iamVjdH0gdGFibGUgaHRtbCBub2RlIG9iamVjdFxuICogQHBhcmFtIHthcnJheX0gaGVhZGVycyBhcnJheSB3aXRoIGhlYWRlcnMnIHZhbHVlc1xuICogQHBhcmFtIHthcnJheX0gcm93cyBhcnJheSB3aXRoIGh0bWwgbm9kZXMgdG8gYmUgdXNlZCBhcyByb3dzXG4gKiBAcmV0dXJucyB7dm9pZH0gXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlKGNvbnRhaW5lciwgdHlwZSwgdGFibGUsIGhlYWRlcnMsIHJvd3MpIHtcblxuICAgIGxldCB0YWJsZVRpdGxlID0gY3JlYXRlTm9kZSgnaDInLCB0eXBlKTtcblxuICAgIC8vY3JlYXRlIGhlYWRlcnNcbiAgICBsZXQgdHIgPSBjcmVhdGVOb2RlKCd0cicpO1xuICAgIGZvciAobGV0IGNlbGwgb2YgaGVhZGVycykge1xuICAgICAgICBsZXQgdGQgPSBjcmVhdGVOb2RlKCd0aCcsIGNlbGwpO1xuICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgfVxuICAgIHRhYmxlLmFwcGVuZENoaWxkKHRyKTtcblxuICAgIC8vIHRhYmxlLmFwcGVuZENoaWxkKGhlYWRlcnMpO1xuICAgIGZvciAobGV0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgfVxuXG4gICAgLy9hcHBlbmQgdGFibGUgdG8gaXRzIGNvbnRhaW5lclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZVRpdGxlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGppcmEgPSB7fSkge1xuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChqaXJhLndpZGdldHMudGltZS5jb250YWluZXIpLFxuICAgICAgICBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpLFxuICAgICAgICB0aW1lID0gbmV3IERhdGUoKSxcbiAgICAgICAgaG91cnMgPSB0aW1lLmdldEhvdXJzKCkgPiAxMiA/ICh0aW1lLmdldEhvdXJzKCkgLSAxKSA6IHRpbWUuZ2V0SG91cnMoKSxcbiAgICAgICAgbWludXRlcyA9IHRpbWUuZ2V0TWludXRlcygpIDwgMTAgPyBgMCR7dGltZS5nZXRNaW51dGVzKCl9YCA6IHRpbWUuZ2V0TWludXRlcygpO1xuXG4gICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XG4gICAgaGVhZGVyLmNsYXNzTmFtZSA9IGppcmEud2lkZ2V0cy50aW1lLmNsYXNzO1xuICAgIGhlYWRlci50ZXh0Q29udGVudCA9IGBMYXN0IHVwZGF0ZTogJHtob3Vyc30gOiAke21pbnV0ZXN9YDtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbn0iXX0="}